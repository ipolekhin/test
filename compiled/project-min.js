$(function(){var e=document.querySelector(".main-navigation"),t=document.querySelector(".back-toggler"),s=document.querySelector(".submenu-target"),o=document.querySelector(".navbar-toggler"),l=document.querySelector(".subscribe-link"),n=document.querySelector(".modal-subscribe"),a=document.querySelectorAll(".modal-close"),c=document.querySelectorAll(".modal"),r=document.querySelector(".subscribe-form"),d=document.querySelector("header"),u=document.querySelector("main"),p=document.querySelector("footer");s.addEventListener("click",function(e){e.preventDefault,window.innerWidth<992&&(this.nextElementSibling.classList.add("collapsed"),o.classList.add("right"))}),t.addEventListener("click",function(e){e.preventDefault(),t.parentElement.classList.remove("collapsed"),o.classList.remove("right")}),o.addEventListener("click",function(){if(o.classList.contains("collapsed")){o.classList.remove("collapsed"),e.classList.remove("collapsed");let t=document.querySelectorAll(".collapsed");for(i=0;i<t.length;i++)t[i].classList.remove("collapsed");o.classList.remove("right")}else o.classList.add("collapsed"),e.classList.add("collapsed")}),$(".search-string").on("focus",function(){$resultElement=$(".search_content"),$resultElement.toggle()}),$(document).on("click",function(e){$(e.target).closest(".search").length||$(".search_content").hide(),$(e.target).closest(".basket_tooltip, .basket_info").length||$(".basket_tooltip").removeClass("show"),$(e.target).closest(".custom-select, .options, .select-price").length||$(".custom-select.open, .options.open, .select-price.open").removeClass("open"),e.stopPropagation()});var h=document.querySelector(".search-string");function m(){d.classList.add("blur"),u.classList.add("blur"),p.classList.add("blur")}h.addEventListener("focus",function(){window.innerWidth>576&&window.innerWidth<992&&e.classList.add("opacityon")}),h.addEventListener("blur",function(){e.classList.remove("opacityon")}),$(".basket_info").click(function(e){e.preventDefault(),$(this).next(".basket_tooltip").toggleClass("show")}),l.addEventListener("click",function(e){e.preventDefault(),n.classList.add("modal-show"),m()});var f,v,g=function(e){e.target.closest(".modal").classList.remove("modal-show");let t=document.querySelectorAll(".blur");if(t)for(i=0;i<t.length;i++)t[i].classList.remove("blur")};for(i=0;i<a.length;i++){a[i].addEventListener("click",g,!1)}function b(){var e=0,t=0,s=$(".basket_tooltip-list");s.find("td.price").each(function(){e+=parseInt($(this).html())}),$(".amount-price span").html(e+" ₽"),s.find("input").each(function(e,s){(t+=parseInt($(s).val()))>9&&(t="+9")}),$(".order_item_count").html(t)}function k(e){var t,s,o=[],i=$(e).children("option");$(e).hide(),$(i).each(function(){o.push($(this).html())}),$(e).after('<ul class="custom-select" data-selected-value="'+o[0]+'">'),(t=$(e).siblings(".custom-select")).append('<li class="selected-option"><span>'+o[0]+"</span>"),t.children(".selected-option").append('<ul class="options">'),(s=$(e).children("option:selected").text())&&t.find(".selected-option span").text(s);for(var l=1;l<o.length;l++)t.find(".options").append('<li class="'+$(i[l]).prop("class")+'">'+o[l]+"</li>");t.click(function(){$(this).toggleClass("open"),$(".options",this).toggleClass("open")}),t.find(".options li").click(function(){for(var e=$(this).text(),s=$(this).attr("data-value"),o=t.find(".selected-option span").text(e),l=1;l<i.length;l++)$(i[l]).text()===o.text()&&($(i[l]).attr("selected","true"),$(i[l]).siblings().removeAttr("selected"));t.attr("data-selected-value",s)})}function w(e){w=$(e).siblings(".custom-select"),$(w).click(function(){$(this).toggleClass("open"),$(this).next(".select-value").toggleClass("open")})}r.addEventListener("submit",function(e){e.preventDefault(),r.innerHTML='<div class="sucess">Спасибо, что Вы с Нами!</div>'}),window.addEventListener("keydown",function(e){if(27===e.keyCode){let t=document.querySelectorAll(".blur"),s=document.querySelector(".modal-open"),l=document.querySelectorAll(".collapsed");for(i=0;i<t.length;i++)t[i].classList.remove("blur");for(i=0;i<l.length;i++)l[i].classList.remove("collapsed");for(i=0;i<c.length;i++)c[i].classList.contains("modal-show")&&(e.preventDefault(),c[i].classList.remove("modal-show"));s&&s.classList.remove("modal-open"),o.classList.contains("collapsed")&&o.classList.remove("collapsed"),o.classList.contains("right")&&o.classList.remove("right")}}),$(".course-details-btn").click(function(){var e=$(this).next(".details").html(),t=$("body").find(".modal-course-details");$("body").addClass("modal-open"),t.addClass("modal-show"),t.children("div").html(e),m(),$(".modal-close").click(function(){t.removeClass("modal-show"),$(".blur, body").removeClass("blur")})}),$(".show-all-courses").click(function(e){e.preventDefault(),console.log("показать все курсы"),$(this).siblings(".courses-item").addClass("show"),$(this).hide()}),$(".modal").click(function(e){$(e.target).hasClass("modal-show")&&($(e.target).removeClass("modal-show"),$(".blur").removeClass("blur"),$(".modal-open").removeClass("modal-open"))}),$(".tab-studio-info .tabs-studio-info > li a").click(function(e){e.preventDefault(),$(".tab-studio-info .tabs-studio-info > li a").removeClass("current"),$(this).addClass("current"),$(".tab-studio-content > div").hide(),t_content=$(this).attr("href"),$(t_content).show()}),$(".tab-studio-info .tabs-studio-info > li a:first").trigger("click"),$("#select-towns").change(function(){var e=this.value,t=document.querySelectorAll(".agency-info-list div");for(i=0;i<t.length;i++)t[i].classList.contains(e)?t[i].classList.add("show"):t[i].classList.remove("show")}),$(".quantity button").click(function(e){e.preventDefault(),console.log("клик количество");var t,s=$(this).parent().find("input"),o=$(this),i=parseFloat(s.val()),l=o.parents(".goods__item").attr("data-element_id");t=o.hasClass("plus")?i<999?i+1:i:i>1?i-1:i,$('.goods__item[data-element_id="'+l+'"]').each(function(){var e=$(this).find("td.price");e.text(e.data("price")*t+" ₽")}),s.val(t).change(),b()}),$(".quantity.basket .goods__remove").click(function(e){if($(e.target).closest(".quantity.basket .goods__remove").length){e.stopPropagation(),e.preventDefault();var t=$(this).parents(".goods__item").attr("data-element_id");$('.goods__item[data-element_id="'+t+'"]').each(function(){$(this).remove()});var s=$(".tooltip_count span"),o=s.attr("data-count")-1;s.attr("data-count",o),o>0?s.text("В корзине еще "+o+" товаров"):s.text(""),b()}}),$(".product-thumb-list .product-thumb-item").click(function(){var e=$(this);$(".product-thumb-item.current").removeClass("current"),e.addClass("current");var t=$(".product-photo-item"),s=e.find("img").data("number");t.removeClass("current"),$(".product-photo-item").each(function(e){s==e&&$(this).addClass("current")})}),k("#select-category"),k("#select-collection"),k("#select-post"),k("#select-adress"),k("#select-status"),function(e){var t,s=[],o=$(e).children("option");$(e).hide(),$(o).each(function(){s.push($(this).html())}),$(e).after('<ul class="custom-select">'),(t=$(e).siblings(".custom-select")).append('<li class="selected-option"><span>'+s[0]+"</span>"),t.after('<ul class="options">');for(var i=1;i<s.length;i++)t.next(".options").append('<li data-value="'+$(o[i]).val()+'"><i  class="'+$(o[i]).prop("class")+'" ></i></li>');function l(){t.find(".selected-option").html("<span>"+s[0]+"</span>");var o=$(e).children("option:selected");o.each(function(e){t.find(".selected-option span").append('<i class="'+$(o[e]).prop("class")+'"></i>')})}l(),t.click(function(){$(this).toggleClass("open"),$(this).next(".options").toggleClass("open"),$(this).next(".options.open").find("li").each(function(e){e++,$(o[e]).prop("selected")&&($(o[e]).prop("selected",!0),$(this).addClass("focus"))})}),t.next(".options").find("li").click(function(){for(var e=$(this).attr("data-value"),t=1;t<o.length;t++)$(o[t]).val()===e&&($(o[t]).prop("selected")?($(o[t]).prop("selected",!1),$(this).removeClass("focus"),l()):($(o[t]).prop("selected",!0),$(this).addClass("focus"),l()))})}("#select-color"),w("#select-price"),$(".purchase").click(function(e){e.preventDefault();var t=parseInt($(".amount-price span").html());$(e.target).hasClass("disabled")||alert("Заказ оформлен. Сумма заказа "+t)}),f=parseInt($(".amount-price span").html()),v=$(".comments-submit"),f<1500&&($(".notify-block, .notify-block-top, .price-min, .price-min-top").addClass("show"),v.addClass("disabled"),v.find("button").addClass("disabled")),$(".goods__absence").hasClass("absence")&&($(".notify-block, .goods-absence").addClass("show"),v.addClass("disabled"),v.find("button").addClass("disabled")),$(".change-adress").click(function(e){e.preventDefault();var t=$(".block-contacts input");t.prop("disabled",!1),$(e.target).hide(),$(".block-contacts").append('<div class="save-adress"><button class="change-apply button" href="#">Сохранить измененеия</button></div>'),console.log(t),$(".change-apply").click(function(e){e.preventDefault(),$(e.target).remove(),$(".change-adress").show();var t=$(".block-contacts input");t.prop("disabled",!0),console.log(t)})}),$(".tabs .tabs__link").click(function(){$(".tabs .tabs__link").removeClass("current"),$(this).addClass("current"),$(".tabs-content__item").hide();var e=$(this).attr("href");return $(e).show(),!1}),$(".tabs .tabs__link:first").trigger("click"),$(".show-all-order").click(function(e){e.preventDefault(),$(this).siblings(".order-item__goods-list").children(".inorder-good-item").each(function(e){e>3&&$(this).toggleClass("show")})});var S=document.querySelector(".remove-adress-link"),L=document.querySelector(".modal-remove-adress");(S||L)&&S.addEventListener("click",function(e){e.preventDefault(),L.classList.add("modal-show"),m()}),$("#recipient-other").prop("checked")&&$(".recipient-group .recipient-fio").show(),$('.recipient-group input[name="recipient"]').click(function(){var e=$(this).val(),t=$(".recipient-group .recipient-fio");"recipient-other"==e?t.show():t.hide()})}),$(function(){$(".regular").slick({dots:!0,infinite:!0,slidesToShow:4,slidesToScroll:3}),$(".catalog-list.carusel").slick({infinite:!0,slidesToShow:5,variableWidth:!1,centerMode:!1,cssEase:"linear",arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:3,variableWidth:!0}},{breakpoint:768,settings:{slidesToShow:3,variableWidth:!0}},{breakpoint:576,settings:{slidesToShow:1,variableWidth:!0}}]}),$(".slider-list").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,arrows:!1,responsive:[{breakpoint:992,settings:{arrows:!0}},{breakpoint:570,settings:{arrows:!1}}]}),$(".brand-list").slick({infinite:!1,slidesToShow:4,slidesToScroll:1,variableWidth:!0,arrows:!1,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:570,settings:{slidesToShow:1,arrows:!1}}]}),$(".service-carusel-list").slick({infinite:!1,slidesToShow:5,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:570,settings:{slidesToShow:1,arrows:!1}}]}),$(".number1").slick({fade:!0}),$(".number2").slick({fade:!0}),$(".number3").slick({fade:!0}),$(".comments-info-list").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,draggable:!1,fade:!0,asNavFor:".comments-photo-list"}),$(".comments-photo-list").slick({slidesToShow:3,slidesToScroll:1,focusOnSelect:!0,asNavFor:".comments-info-list"}),$(".partner-comments-info-list").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,draggable:!1,fade:!0,asNavFor:".partner-comments-photo-list"}),$(".partner-comments-photo-list").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".partner-comments-info-list"}),$(".stuff-carusel-list").slick({infinite:!1,slidesToShow:3,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:570,settings:{slidesToShow:1,arrows:!1}}]}),$(".students-work-list").slick({infinite:!1,slidesToShow:4,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:570,settings:{slidesToShow:1,arrows:!1}}]}),$(".shop-category-list").slick({infinite:!1,slidesToShow:6,slidesToScroll:1,responsive:[{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:570,settings:{slidesToShow:1,arrows:!1}}]})});